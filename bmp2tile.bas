5     sprites on 10    dword=alloc(4):pokew dword,020    cls :bitmap on :bitmap clear 030    loadpalette()40    input "bitmap filename (.bmp will be added):";a$55    print "Loading bitmap..."60    try bload a$+".bmp",$30000 to ec65    if ec<>0 then cls :print "Error: File does not exist!":end 70    wpeek($30012):xs=dwval80    wpeek($30016):ys=dwval85    wpeek($3001C):bits=dwval90    wpeek($3000A)95    print "bitmap size x:";xs,"y:";ys,bits;" bit color"97    print xs*ys\256;" 16x16 tiles to import."100   orig=$30000+dwval:dest=$10000110   for y=ys-1 downto 0120   memcopy orig,xs to dest+(y*320)130   orig=orig+xs140   next 150   ?1=1160   for a=0 to 255165   wpeek($30036+(a*4))170   poke $D000+(a*4),peek(dword):poke $D001+(a*4),peek(dword+1)175   poke $D002+(a*4),peek(dword+2)180   next 190   ?1=0195   cls :rem "create a cursor sprite"200   memcopy $30000,1024 poke 0:rem "clear a 1k area on top memory"210   for c=0 to 15:xpoke($30003+c,15)220   xpoke($30003+c*16,15):xpoke($30003+c*16-1,15)230   xpoke($30003+(16*15)+c,15)240   next 250   rem "register on sprite index"260   xpoke($30000,$11):xpoke($30001,1):xpoke($30002,0)270   sprite 1 to 0,0 image 0:sprite 1 to 8,8280   address=$30400290   for c=0 to (ys\16)-1300   for d=0 to (xs\16)-1310   for e=0 to 15320   memcopy $10000+e*320+d*16+(c*16*320),16 to address330   address=address+16340   next 345   sprite 1 to 8+(d*16),8+(c*16)350   next 360   next 370   bitmap off 380   print c*d;" tiles exported"385   print "saving tiles... (This will take a while)"390   bsave a$+".tile",$30400,xs*ys400   print "Tile file saved as ";a$;".tile"410   sprite 1 off 999   end 10000 proc loadpalette()10010 a$="default.pal"10020 try bload a$,$7800 to ec10030 if ec<>010040 print "Error: default palette not found!":end 10050 endif 10060 ?1=1:for c=0 to 1023:?($D000+c)=?($7800+c):next :?1=010070 endproc 10100 proc wpeek(a)10110 memcopy a,4 to dword10120 dwval=peekw(dword)10130 endproc 10150 proc xpoke(add,val)10160 poke dword,val10170 memcopy dword,1 to add10180 endproc 